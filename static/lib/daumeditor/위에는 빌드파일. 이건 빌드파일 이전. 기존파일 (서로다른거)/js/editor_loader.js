!function(t){function e(t){return t.replace(/[^\/]+\/?$/,"")}function n(e){for(var n=t.getElementsByTagName("script"),a=0;a<n.length;a++)if(n[a].src.indexOf(e)>=0)return n[a];throw"cannot find '"+e+"' script element"}function a(t){var e=n(t),a=e.src;return a.substring(a.indexOf("?")+1)}function r(t){var e=n(t),a=e.src.match(M);return a&&2==a.length?a[1]:""}function i(t){return N[t]||v}function o(t){var e=P.parse(a(b.NAME),"&");return e.findByName(t)}function s(e){var n=P.parse(t.cookie,/;[ ]*/),a=n.findByName(p+e);return a?decodeURIComponent(a):a}function u(e){var n=t.createElement("script");return n.type="text/javascript",n.src=e,n}function c(e){var n=t.location;if(e.match(/^(https?:|file:|)\/\//));else if(0===e.indexOf("/"))e="http://"+n.host+e;else{var a=n.href,r=a.lastIndexOf("/");e=a.substring(0,r+1)+e}return e}function d(e,n){var a=u(e),r=t.getElementsByTagName("head")[0]||t.documentElement;return f(a,r,n),r.insertBefore(a,r.firstChild),a}function f(t,e,n){n&&(t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n(),/MSIE/i.test(navigator.userAgent)&&(t.onload=t.onreadystatechange=null,e&&t.parentNode&&e.removeChild(t)))})}function h(t){"function"==typeof t&&t(Editor)}function l(){var t="editor.js";N.version=r(b.NAME);var e=o("environment");e&&(N.environment=e),b.loadModule(t)}var v="",p="tx_",m="uninitialized",g="loading",y="complete",E="production",S="development",B=1e3,T=5,M=/\/(\d+[a-z.]?\.[a-z0-9\-]+\.[\-\w]+)\//,N={environment:E,service:"core",version:"",host:""},P=function(){this.data=[]};P.prototype={add:function(t,e){this.data.push({name:t,value:e})},findByName:function(t){for(var e,n=0;n<this.data.length;n++)if(this.data[n]&&this.data[n].name===t){e=this.data[n].value;break}return e}},P.parse=function(t,e){for(var n=new P,a=t.split(e),r=0;r<a.length;r++){var i=a[r].split("=");n.add(i[0],i[1])}return n};var w=function(t){this.TIMEOUT=T*B,this.readyState=m,this.url=t.url,this.callback=t.callback||function(){},this.id=t.id,this.load()};w.prototype={load:function(){var t=this.url,e=this;try{n(t)}catch(n){e.readyState=g;var a=d(t,function(){e.callback(),e.readyState=y});e.id&&(a.id=e.id)}return this},startErrorTimer:function(){var t=this;setTimeout(function(){t.readyState!==y&&t.onTimeout()},t.TIMEOUT)},onTimeout:function(){},onLoadComplete:function(){}};var O=[],b={NAME:"editor_loader.js",TIMEOUT:T*B,readyState:m,loadModule:function(e){function n(t){return!t.match(/^((https?:|file:|)\/\/|\.\.\/|\/)/)}var a=n(e)?this.getJSBasePath()+e:e;N.environment===S&&(a=a+"?dummy="+(new Date).getTime()),t.write('<script type="text/javascript" src="'+a+'" charset="utf-8"></script>')},asyncLoadModule:function(t){return new w(t)},ready:function(t){this.readyState===y?h(t):O.push(t)},finish:function(){for(var t=0;t<O.length;t++)h(O[t]);O=[]},getBasePath:function(t){var a=s("base_path");if(!a){var r=n(t||b.NAME);a=e(e(r.src))}return c(a)},getJSBasePath:function(t){return this.getBasePath()+"js/"},getCSSBasePath:function(){return this.getBasePath()+"css/"},getPageBasePath:function(){return this.getBasePath()+"pages/"},getOption:function(t){return s(t)||o(t)||i(t)}};window.EditorJSLoader=b,l()}(document);