$tx.msie&&Trex.module("add menu layer shield for IE flash object",function(e,t,i,n){function s(e){var t;try{t=e.config.id?e.config.id+e.config.initializedId:e.config.el.className}catch(e){t="unknown"}return t}Trex.MarkupTemplate.add("menu.shield",['<div class="tx-menu-back" style="overflow:hidden;position:absolute;border:0;">','<iframe src="about:blank" width="100%" height="100%" frameborder="0"></iframe>',"</div>"].join(""));var o=Trex.Class.create({initialize:function(e,t){this.id=e,this.menuEl=t,this.shieldEl=Trex.MarkupTemplate.get("menu.shield").evaluateAsDom({})},show:function(){this.update(),$tom.insertAt(this.shieldEl,this.menuEl),$tx.show(this.shieldEl)},hide:function(){$tx.hide(this.shieldEl),$tom.remove(this.shieldEl)},update:function(){var e={width:this.menuEl.offsetWidth.toPx(),height:this.menuEl.offsetHeight.toPx(),left:$tx.getStyle(this.menuEl,"left"),top:$tx.getStyle(this.menuEl,"top")};$tx.setStyle(this.shieldEl,e)},destroy:function(){this.id=_NULL,this.menuEl=_NULL,this.shieldEl=_NULL}}),h=Trex.Class.create({initialize:function(){this.entry={}},show:function(e,t){var i=this.entry[e];if(!i){console.log("show",e,this.entry);var n=new o(e,t);this.entry[e]=i=n}i.show()},hide:function(e){var t=this.entry[e];t&&(console.log("hide",e,this.entry),t.hide(),t.destroy(),delete this.entry[e])},updateAll:function(){var e=this.entry;setTimeout(function(){for(var t in e)e.hasOwnProperty(t)&&e[t].update()},1)}}),l=new h;t.observeJob(Trex.Ev.__MENU_LAYER_SHOW,function(e){var t=e.detail.menu;l.show(s(t),t.elMenu)}),t.observeJob(Trex.Ev.__MENU_LAYER_HIDE,function(e){var t=e.detail.menu;l.hide(s(t))}),t.observeJob(Trex.Ev.__MENU_LAYER_CHANGE_SIZE,function(e){l.updateAll()})});