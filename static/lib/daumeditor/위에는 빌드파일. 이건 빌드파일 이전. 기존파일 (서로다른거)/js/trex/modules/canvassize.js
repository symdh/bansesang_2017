Trex.module("make padding area inside Canvas with editor width",function(t,e,o,i){function r(t){p.addStyle(n(t))}function n(t){for(var e={},o=["top","bottom","left","right"],i=0;i<o.length;i++){var r=o[i];e[r]=t&&t[r]||W}return S?(e.mleft=Math.max(Math.ceil(a()),0),e.mright=Math.max(Math.floor(a()),0),{width:E.toPx(),paddingLeft:e.left.toPx(),paddingRight:e.right.toPx(),paddingTop:e.top.toPx(),paddingBottom:e.bottom.toPx(),marginLeft:e.mleft.toPx(),marginRight:e.mright.toPx()}):{paddingTop:e.top.toPx(),paddingRight:e.right.toPx(),paddingBottom:e.bottom.toPx(),paddingLeft:e.left.toPx()}}function a(){return(y-E-C-_)/2}function d(){var t=a();return t<P?{leftWidth:"0",rightWidth:"0",rightPos:"0"}:{leftWidth:Math.ceil(t-W).toPx(),rightWidth:Math.max(0,Math.floor(t-W)).toPx(),rightPos:(E+Math.ceil(t+W)).toPx()}}function h(){return m&&v}function g(){clearTimeout(A),A=setTimeout(function(){y=i.getContainerWidth(),l()},4)}function l(){r(),f(),x()}function s(){var t=i.getStyleConfig().color;m=tx.div({className:"tx-wysiwyg-padding"}),c=tx.div({className:"tx-wysiwyg-padding-divL",style:{borderColor:t}}),v=tx.div({className:"tx-wysiwyg-padding"}),u=tx.div({className:"tx-wysiwyg-padding-divR",style:{borderColor:t}});var e=i.wysiwygEl;m.appendChild(c),e.insertBefore(m,b),v.appendChild(u),e.insertBefore(v,b),f()}function f(){if(h()){var t=d();$tx.setStyle(m,{width:t.leftWidth}),$tx.setStyle(v,{width:t.rightWidth,left:t.rightPos});var e=t.leftWidth.parsePx()>P,o=i.getConfig().showGuideArea,r=e&&o?"1px solid":"0 none";$tx.setStyle(c,{borderRight:r,borderBottom:r}),$tx.setStyle(u,{borderLeft:r,borderBottom:r})}}function x(){h()&&(i.mode==Trex.Canvas.__WYSIWYG_MODE?($tx.show(m),$tx.show(v)):($tx.hide(m),$tx.hide(v)))}var p=i.getPanel(Trex.Canvas.__WYSIWYG_MODE);if(p){var m,v,c,u,b=p.el,_=16,P=28,C=2,w=i.getSizeConfig(),y=i.getContainerWidth(),E=w.contentWidth.toNumber(),W=w.contentPadding.toNumber(),S=y>E;i.observeJob("canvas.apply.background",function(t){r({top:t&&t.topLeftHeight?t.topLeftHeight.parsePx():0,right:t&&t.midRightWidth?t.midRightWidth.parsePx():0,bottom:t&&t.botLeftHeight?t.botLeftHeight.parsePx():0,left:t&&t.midLeftWidth?t.midLeftWidth.parsePx():0})}),i.observeJob("canvas.apply.letterpaper",function(t){r({top:t&&t.topHeight?t.topHeight.parsePx():0,right:t&&(t.midColor||t.midUrl)?W:0,bottom:t&&t.botHeight?t.botHeight.parsePx():0,left:t&&(t.midColor||t.midUrl)?W:0})}),S&&(i.observeJob(Trex.Ev.__IFRAME_LOAD_COMPLETE,function(){r(),s(),x()}),i.observeJob(Trex.Ev.__CANVAS_MODE_CHANGE,function(){f(),x()}),i.observeJob(Trex.Ev.__CANVAS_WRAP_WIDTH_CHANGE,g),i.observeJob(Trex.Ev.__CANVAS_NORMAL_SCREEN_CHANGE,g),i.observeJob(Trex.Ev.__CANVAS_FULL_SCREEN_CHANGE,g),$tx.msie_nonstd||($tx.gecko?$tx.setStyle(b,{overflowX:"auto",overflowY:"auto"}):$tx.chrome?$tx.setStyle(b.contentDocument.documentElement,{overflowX:"auto",overflowY:"auto"}):$tx.setStyle(b,{overflowX:"auto",overflowY:"scroll"}))),i.getCanvasGuideSize=function(){return d().leftWidth.parsePx()};var A}});