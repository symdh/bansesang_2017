Trex.install("editor.getDocParser",function(t,e,r,i,n){var c=new Trex.Docparser(t,r,n);t.getDocParser=function(){return c}}),Trex.Docparser=Trex.Class.create({initialize:function(t,e,r){this.editor=t,this.sidebar=e,this.config=r},filters:{},registerFilter:function(t,e){this.filters[t]=e},getFilter:function(t){return this.filters[t]},executeFilters:function(t,e){var r=this.filters;return["before "+t,t,"after "+t].each(function(t){var i,n;for(i in r)r.hasOwnProperty(i)&&(n=r[i],n[t]&&(e=n[t](e)))}),e},getContentsAtChangingMode:function(t,e,r){return e==r?t:(t=t.trim()||"",this.executeFilters(e.concat("2").concat(r),t))},convertAtLoad:function(t,e,r){return"original"==r?t=this.executeFilters(e.concat("@load"),t):e!=r&&(t=this.executeFilters(r.concat("2").concat(e),t)),t},convertAtSave:function(t,e,r){return"original"==r?t=this.executeFilters(e.concat("4save"),t):e!=r&&(t=this.executeFilters(e.concat("2").concat(r),t)),t},text2source:function(t){return this.executeFilters("text2source",t)},text2html:function(t){return""===t?$tom.EMPTY_PARAGRAPH_HTML:this.executeFilters("text2html",t)},source2text:function(t){return this.executeFilters("source2text",t)},source2html:function(t){return""===t?$tom.EMPTY_PARAGRAPH_HTML:this.executeFilters("source2html",t)},html2text:function(t){return this.executeFilters("html2text",t)},html2source:function(t){return this.executeFilters("html2source",t)}});