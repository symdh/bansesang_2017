Trex.register("filter > clear redundancy",function(t){function n(t){var n=function(t,n,e){var r=0,u=function(t,e,u){return r++,0==u.length||0==u.trim().length?"":['<span style="',n,":",e,';">',u,"</span>"].join("")},i=new RegExp('(?:<span[^>;]*style="'+n+':[^";]*;?"[^>;]*>){'+e+"}<span\\s*style=['\"]?"+n+":\\s*(\\w+)[;'\"]*>([\\S\\s]*?)</span>(?:</span>){"+e+"}","gi");do r=0,t=t.replace(i,u);while(r>0);return t};t=t.replace(/<(span|font)([^>]*)><\/\1>/gi,function(t,n,e){return/ (?:id|class)=/i.test(e)?t:""});for(var e=["font-size","font-family"],r=0;r<e.length;r++)t=n(t,e[r],2),t=n(t,e[r],1);return t}function e(t){return $tx.msie?t.replace(/<p>\s*<\/p>/gi,""):t}function r(t){return $tx.msie?t.replace(/<p>\s*<\/p>/gi,$tom.EMPTY_PARAGRAPH_HTML):t}var u=t.getDocParser();u.registerFilter("filter/redundancy",{"text@load":function(t){return t},"source@load":function(t){return e(n(t))},"html@load":function(t){return e(n(t))},text4save:function(t){return t},source4save:function(t){return r(t)},html4save:function(t){return r(t)},text2source:function(t){return t},text2html:function(t){return t},source2text:function(t){return t},source2html:function(t){return t},html2text:function(t){return t},html2source:function(t){return n(t)}})});