var $tom={};!function(){function t(t){var e={},r=t.split(",");return r.each(function(t){if(n[t])for(var r in n[t])e[r]=_TRUE;else e[t]=_TRUE}),e}var e={"%body":["body"],"%text":["#text","br"],"%element":["#element"],"%control":["img","object","hr","table","button","iframe"],"%inline":["span","font","u","i","b","em","strong","big","small","a","sub","sup","span"],"%block":["p","div","ul","ol","h1","h2","h3","h4","h5","h6","pre","dl","hr","table","button"],"%paragraph":["p","li","dd","dt","h1","h2","h3","h4","h5","h6","td","th","div","caption"],"%wrapper":["div","ul","ol","dl","pre","xmp","table","button","blockquote"],"%innergroup":["li","dd","dt","td","th"],"%outergroup":["ul","ol","dl","tr","tbody","thead","tfoot","table"],"%tablegroup":["td","th","tr","tbody","thead","tfoot","table"],"%listgroup":["li","ul","ol"],"%datagroup":["dd","dt","dl"],"%listhead":["ul","ol"]},n={};for(var r in e)n[r]={},e[r]&&$A(e[r]).each(function(t){n[r][t]=_TRUE});var i=Trex.Class.create({initialize:function(e){this.patterns=e,this.map=t(e)},hasParts:function(){return this.patterns.length>0},include:function(e){var n=t(e);for(var r in n)if(this.map[r])return _TRUE;return _FALSE},memberOf:function(e){var n=t(e);for(var r in this.map)if(n[r])return _TRUE;return _FALSE},extract:function(e){var n=t(e),r=[];for(var i in this.map)n[i]&&r.push(i);return $tom.translate(r.join(","))},getExpression:function(){if(!this.exprs){var t=[];for(var e in this.map)t.push(e);this.exprs=t.join(",")}return this.exprs}}),o={};Object.extend($tom,{translate:function(t){return o[t]||(o[t]=new i(t)),o[t]}})}(),Object.extend($tom,{__POSITION:{__START_OF_TEXT:-1,__MIDDLE_OF_TEXT:0,__END_OF_TEXT:1,__EMPTY_TEXT:-2}}),Object.extend($tom,{isElement:function(t){return t&&1==t.nodeType},isBody:function(t){return $tom.isElement(t)&&"BODY"==t.tagName},isBlock:function(t){return $tom.kindOf(t,"%block")},isParagraph:function(t){return $tom.kindOf(t,"%paragraph")},isText:function(t){return $tom.kindOf(t,"%text")},isControl:function(t){return $tom.kindOf(t,"%control")},isTagName:function(t,e){return e=e.toUpperCase(),t&&t.tagName===e},getOwnerDocument:function(t){return t.ownerDocument||t.document},getName:function(t){return t&&1==t.nodeType?t.nodeName.toLowerCase():""},getText:function(t){return t.textContent||t.text||t.innerText||""},getLength:function(t){return t?1==t.nodeType?t.childNodes.length:3==t.nodeType?t.nodeValue.length:0:0},indexOf:function(t){if(!t)return-1;for(var e=t.parentNode,n=0,r=e.childNodes.length,i=e.childNodes;n<r;n++)if(i[n]==t)return n;return-1},hasContent:function(t,e){if(!t||3!=t.nodeType)return _TRUE;var n=$tom.removeMeaninglessSpace(t.nodeValue);return e&&(n=n.replace(Trex.__WORD_JOINER_REGEXP,"")),""!=n},removeEmptyTextNode:function(t){t&&3==t.nodeType&&!t.nodeValue&&$tom.remove(t)},hasUsefulChildren:function(t,e){if(!t)return _FALSE;var n=$tom.removeMeaninglessSpace(t.innerHTML);return e&&(n=n.replace(Trex.__WORD_JOINER_REGEXP,"")),n?n.stripTags()?_TRUE:n.search(/<(img|br|hr)\s?[^>]*>/i)>-1?_TRUE:n.search(/<span\sid="?tx_(start|end)_marker"?><\/span>/i)>-1?_TRUE:_FALSE:_FALSE},hasData:function(t,e){if(!t)return _FALSE;var n="";return n=1==t.nodeType?t.innerHTML:t.nodeValue,n=$tom.removeMeaninglessSpace(n),""==n.trim()?_FALSE:""!=n.stripTags()?_TRUE:e?_FALSE:n.search(/<br\s?\/?>/i)>-1?_TRUE:_FALSE},removeMeaninglessSpace:function(t){return t.replace(/(^[\f\n\r\t\v\u2028\u2029]*)|([\f\n\r\t\v\u2028\u2029]*$)/g,"")}}),Object.extend($tom,{search:function(t,e,n){var r=1==t.length?_DOC:t[0],i=t[t.length-1],o=!i||!r||!r.nodeType||"string"!=typeof i;if(o)return n;var a=$tom.translate(i);return e(r,a.getExpression())},find:function(){return this.search(arguments,dFindy,_NULL)},collect:function(){return this.search(arguments,dGetty,_NULL)},collectAll:function(){return this.search(arguments,dGetties,[])}}),function(){function t(t){if(t){if("function"==typeof t)return t;var e=$tom.translate(t);return function(t){return 1==t.nodeType?e.include("#element")?_TRUE:dChecky(t,e.getExpression()):e.include("#text")}}return _NULL}function e(t){if(t=t||"#element,#text",n[t])return n[t];var e=new r(t);return n[t]=e,e}var n={},r=Trex.Class.create({initialize:function(t){this.pattern=t,this.translator=$tom.translate(t),this.hasClassPattern=t.indexOf(".")>=0,this.hasIdPattern=t.indexOf("#")>=0,this.matchesText=this.translator.include("#text"),this.matchesElement=this.translator.include("#element")},test:function(t){var e=t.nodeType,n=this.translator.map;if(1==e){if(this.matchesElement)return _TRUE;var r=t.tagName.toLowerCase();if(n[r])return _TRUE;var i=[];if(this.hasClassPattern&&t.className&&t.className.split(/\s/).each(function(t){i.push("."+t),i.push(r+"."+t)}),this.hasIdPattern&&t.id){var o=t.id;i.push("#"+o),i.push(r+"#"+o)}for(var a=0;a<i.length;a++)if(n[i[a]])return _TRUE;return _FALSE}if(3==e)return this.matchesText}});Object.extend($tom,{tagName:function(t,e){return t?t.tagName:_NULL},kindOf:function(t,n){if(!t||!n)return _FALSE;var r=e(n);return r.test(t)},kindOf_old:function(e,n){return e&&n?t(n)(e):_FALSE},ancestor:function(t,n){if(!t||!t.parentNode)return _NULL;for(var r=e(n),i=t.parentNode;i;){if($tom.isBody(i))return _NULL;if(r.test(i))break;i=i.parentNode}return i},findAncestor:function(t,e,n){for(;!n(t);){if(e(t))return t;t=t.parentNode}return _NULL},descendant:function(t,e){var n=$tom.descendants(t,e,_TRUE);return 0==n.length?_NULL:n[0]},descendants:function(t,n,r){if(r=r||_FALSE,!t||!t.firstChild)return[];var i=_FALSE,o=e(n),a=[],s=function(t){if((!r||!i)&&$tom.first(t))for(var e=$tom.children(t),n=0,l=e.length;n<l;n++)o.test(e[n])?(a.push(e[n]),i=_TRUE):s(e[n])};return s(t),a},children:function(t,n){var r=[];if(!t||!t.firstChild)return r;for(var i=e(n),o=$tom.first(t);o;)i.test(o)&&r.push(o),o=o.nextSibling;return r},next:function(t,n){if(!t||!t.nextSibling)return _NULL;for(var r=e(n),i=t.nextSibling;i&&(!$tom.hasContent(i)||!r.test(i));)i=i.nextSibling;return i},previous:function(t,n){if(!t||!t.previousSibling)return _NULL;for(var r=e(n),i=t.previousSibling;i&&(!$tom.hasContent(i)||!r.test(i));)i=i.previousSibling;return i},first:function(t,n){if(!t||!t.firstChild)return _NULL;for(var r=e(n),i=t.firstChild;i&&(!$tom.hasContent(i)||!r.test(i));)i=i.nextSibling;return i},last:function(t,n){if(!t||!t.lastChild)return _NULL;for(var r=e(n),i=t.lastChild;i&&(!$tom.hasContent(i)||!r.test(i));)i=i.previousSibling;return i},extract:function(t,n,r){var i=[];if(!t||!n||!r)return i;for(var o=e(r),a=_FALSE,s=t.firstChild;s;){if($tom.include(s,n)&&(a=_TRUE),o.test(s))i.push(s);else{if(a)break;i=[]}s=s.nextSibling}return a?i:[]},parent:function(t){return t&&t.parentNode?t.parentNode:_NULL},body:function(t){if(!t||!t.parentNode)return _NULL;for(var e=t.parentNode;e;){if($tom.isBody(e))return e;e=e.parentNode}return _NULL},top:function(t,e){e=e||_FALSE;for(var n=t;$tom.first(n);)n=$tom.first(n);return e?n:($tom.kindOf(n,"#tx_start_marker,#tx_end_marker")?n=n.nextSibling||n.parentNode:$tom.kindOf(n,"%control")&&(n=n.parentNode),n)},bottom:function(t,e){e=e||_FALSE;for(var n=t;$tom.last(n);)n=$tom.last(n);return e?n:($tom.kindOf(n,"#tx_start_marker,#tx_end_marker")?n=n.previousSibling||n.parentNode:$tom.kindOf(n,"%control")&&(n=n.parentNode),n)},include:function(t,e){if(!t||!e)return _FALSE;if(t==e)return _TRUE;for(var n=e;n;){if($tom.isBody(n))return _FALSE;if(n==t)return _TRUE;n=n.parentNode}return _FALSE},prevNodeUntilTagName:function(t,e,n){for(n=n.toUpperCase(),t=0===e?t.previousSibling:t.childNodes[e-1];t&&t.lastChild&&t.tagName!==n;)t=t.lastChild;return t},nextContent:function(t,e){do{var n=$tom.next(t,e);if(n)return n;t=$tom.parent(t)}while(t&&!$tom.isBody(t));return null}})}(),Object.extend($tom,{insertFirst:function(t,e){if(t&&e)return t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e},insertAt:function(t,e){if(t&&e)return e.parentNode.insertBefore(t,e),t},insertNext:function(t,e){if(t&&e){var n=e.nextSibling;return n?n.parentNode.insertBefore(t,n):e.parentNode.appendChild(t),t}},append:function(t,e){if(t&&e)return t.appendChild(e),e},remove:function(t){t&&(t.parentNode&&t.parentNode.removeChild(t),t=_NULL)},html:function(t,e){if(t)return t.innerHTML=e||"",t},clean:function(t){return $tom.html(t)},stuff:function(t,e){if(!t)return t;if($tom.hasUsefulChildren(t,_TRUE))return t;if(t.lastChild){for(var n=t;n.lastChild;)n=n.lastChild;$tom.insertNext(e,n)}else $tom.append(t,e);return t}}),Object.extend($tom,{removeListIfEmpty:function(t){for(;$tom.kindOf(t,"%listhead")&&1==t.childNodes.length&&$tom.kindOf(t.firstChild,"%listhead");)t=t.firstChild;for(;$tom.kindOf(t,"%listhead")&&0==t.childNodes.length;){var e=t.parentNode;$tom.remove(t),t=e}}}),Object.extend($tom,{moveChild:function(t,e,n,r){if(t&&e&&(n=Math.min(Math.max(n||0),t.childNodes.length),r=Math.min(Math.max(r||t.childNodes.length),t.childNodes.length),!(n>=r)))for(var i=n;i++<r&&n<t.childNodes.length;)e.appendChild(t.childNodes[n])},moveChildToParent:function(t){if(t)for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t)}}),Object.extend($tom,{replace:function(t,e){if(!t||!e)return _NULL;if($tom.getName(t)==$tom.getName(e))return $tom.remove(e),t;for(var n=[],r=t.childNodes,i=r.length,o=0;o<i;o++)n.push(r[o]);for(o=0;o<i;o++){var a=n[o];if(a.lastChild===t){var s=$tom.clone(a);$tom.moveChild(a,s),a.innerHTML="",e.appendChild(s)}else e.appendChild(a)}return $tom.insertAt(e,t),$tom.remove(t),e},clone:function(t,e){var n=t.cloneNode(!!e);return 1==t.nodeType&&n.removeAttribute("id"),n}}),Object.extend($tom,{wrap:function(t,e){return t&&e?(e instanceof Array==_FALSE&&(e=[].concat(e)),$tom.insertAt(t,e[0]),e.each(function(e){$tom.append(t,e)}),t):_NULL},unwrap:function(t){if(!t)return _NULL;var e=$tom.first(t);return $tx.msie_nonstd?t.removeNode():($tom.moveChildToParent(t),$tom.remove(t)),e}}),Object.extend($tom,{divideText:function(t,e){if(!$tom.isText(t))return t;if(e<=0||e>=t.length)return t;var n=t.cloneNode(_FALSE);return t.deleteData(e,t.length-e),n.deleteData(0,e),$tom.insertNext(n,t),n},divideNode:function(t,e){if(!$tom.isElement(t))return _NULL;for(var n=t.childNodes.length-e,r=t.cloneNode(_FALSE),i=0;i<n;i++)$tom.insertFirst(r,t.lastChild);return $tom.insertNext(r,t),r},splitAt:function(t,e){if($tom.isElement(t)){var n=$tom.clone(t);return $tom.moveChild(t,n,e+1,t.childNodes.length),$tom.insertNext(n,t),n}},divideTree:function(t,e){var n,r,i=e;do r=i.parentNode,n=$tom.indexOf(i),i=$tom.divideNode(r,n);while(i.previousSibling!=t);return i},divideParagraph:function(t){for(var e=t,n=$tom.indexOf(t),r=e;e&&!$tom.isBody(e)&&!$tom.kindOf(e,"td,th,%wrapper,%outergroup");){if($tom.kindOf(e,"#tx_start_marker,#tx_end_marker"))n=$tom.indexOf(e);else if($tom.isControl(e))n=$tom.indexOf(e);else if($tom.isText(e))e=$tom.divideText(e,n),n=$tom.indexOf(e);else if(e=$tom.divideNode(e,n),n=$tom.indexOf(e),r=e,$tom.kindOf(e,"p,li,dd,dt,h1,h2,h3,h4,h5,h6"))break;e=e.parentNode}return r},wrapInlinesWithP:function(t,e){var n=$tom.getOwnerDocument(t),r=$tom.extract(e||n.body,t,"%text,%inline,%control");if(this.hasOnlySavedCaret(r,t))return _NULL;var i=n.createElement("p");return $tom.wrap(i,r),i},hasOnlySavedCaret:function(t,e){var n=t.findAll(function(t){return 3!=t.nodeType||""!=t.nodeValue.trim()});return this.isGoogRangeCaret(e)&&1==n.length&&n[0]==e},isGoogRangeCaret:function(t){return t&&/goog_[0-9]+/.test(t.id)}}),Object.extend($tom,{paragraphOf:function(t){if(!t)return"p";var e=$tom.translate(t);return e.memberOf("ul,ol")?"li":e.memberOf("dl")?"dd":e.memberOf("tr,tbody,thead,tfoot,table")?"td":"p"},inlineOf:function(){return"span"},outerOf:function(t){if(!t)return"span";var e=$tom.translate(t);return e.memberOf("li")?"ol":e.memberOf("dd,dt")?"dl":e.memberOf("td,th,tr")?"table":"p"}}),function(){var t=0,e=Trex.Class.create({$const:{__FONT_SIZE_BASIS:9,__REG_EXT_NUMBER:new RegExp("[0-9.]+"),__REG_EXT_UNIT:new RegExp("px|pt|em")},initialize:function(){this.unitConverter={px2em:1/12,px2pt:.75,em2px:12,em2pt:9,pt2px:12/9,pt2em:1/9}},calculate:function(t,e){t!=_NULL&&0!=t.length||(t="0em"),e!=_NULL&&0!=e.length||(e="0em");var n=this.extractSign(e),r=this.extractUnit(t),i=this.extractUnit(e),o=this.extractNumber(t).toNumber(),a=this.extractNumber(e).toNumber();r!=i&&this.unitConverter[r+"2"+i]&&(o*=this.unitConverter[r+"2"+i]);var s=0;return s="-"==n?Math.max(o-a,0):o+a,s=Math.round(10*s)/10,0==s?_NULL:s+i},needCalculation:function(t){return t==_NULL||"string"!=typeof t?_FALSE:"+"==t.charAt(0)||"-"==t.charAt(0)},extractSign:function(t){var e="+";return"+"!=t.charAt(0)&&"-"!=t.charAt(0)||(e=t.charAt(0)),e},extractNumber:function(t){var n,r=0;return(n=t.match(e.__REG_EXT_NUMBER))!=_NULL&&(r=n[0]),t.indexOf("%")>-1&&(r/=100),r},extractUnit:function(t){var n,r="em";return(n=t.match(e.__REG_EXT_UNIT))!=_NULL&&(r=n[0]),r}}),n=new e,r={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellPadding:"cellPadding",cellSpacing:"cellSpacing",more:"more",less:"less",style:"style"};Object.extend($tom,{applyAttributes:function(t,e){if($tom.isElement(t))for(var n in e)"style"==n?$tom.applyStyles(t,e[n]):$tom.setAttribute(t,n,e[n])},removeAttributes:function(e,n){if($tom.isElement(e))for(var r in n)"style"==r?$tom.removeStyles(n[r]):e.removeAttribute(r,t)},getAttribute:function(t,e){return $tom.isElement(t)&&t&&t.getAttribute?t.getAttribute(r[e]||e):_NULL},setAttribute:function(e,n,i){if($tom.isElement(e))if(i==_NULL||0==i.length||0==i)e.removeAttribute(n,t);else if(r[n])e.setAttribute(r[n],i);else try{e[n]=i}catch(t){console.log(t),e.setAttribute(r[n]||n,i)}},setStyles:function(t,e,r){var i,o=t.style.cssText,a=Object.extend({},e);a.font&&(r?t.style.font=a.font:t.style.cssText.indexOf("font:")==-1&&(t.style.cssText="font: "+a.font+"; "+t.style.cssText),delete a.font);for(var s in a){var l;l=n.needCalculation(a[s])?n.calculate(t.style[s],a[s]):a[s],l==_NULL&&(l=""),"float"==s&&(s=$tx.msie?"styleFloat":"cssFloat"),i=!t.style[s]&&(0!=s.indexOf("font")||o.indexOf("font:")==-1)||r;var u="textDecoration"==s&&!t.style[s].include(l);i?t.style[s]=l:u&&(t.style[s]+=" "+l)}$tom._clearUselessStyle(t)},applyStyles:function(t,e){this.setStyles(t,e,_TRUE)},addStyles:function(t,e){this.setStyles(t,e,_FALSE)},removeStyles:function(t,e){var n=t.style.cssText,r=n;for(var i in e)i=i.replace(/([A-Z])/g,"-$1"),n=n.replace(new RegExp("(^| )"+i+"\\s*:[^;]+;? ?","ig"),"");r!=n&&(t.style.cssText=n,$tom._clearUselessStyle(t))},_clearUselessStyle:function(e){var n=$tom.getAttribute(e,"style");n||e.removeAttribute("style",t)},getStyleText:function(t){return t.style.cssText},setStyleText:function(t,e){t.style.cssText=e,!e&&$tom._clearUselessStyle(t)}})}(),Object.extend($tom,{goInto:function(t,e){t&&t.scrollIntoView&&t.scrollIntoView(e)},getWindow:function(t){return t.defaultView||t.parentWindow},getScrollTop:function(t){if(!t)return 0;var e=this.getWindow(t),n="pageYOffset";return n in e?e[n]:t.documentElement.scrollTop},setScrollTop:function(t,e){t&&(t.documentElement.scrollTop?t.documentElement.scrollTop=e:t.body.scrollTop=e)},getScrollLeft:function(t){return t?t.documentElement.scrollLeft||t.body.scrollLeft:0},setScrollLeft:function(t,e){t&&(t.documentElement.scrollLeft?t.documentElement.scrollLeft=e:t.body.scrollLeft=e)},getPosition:function(t,e){if(!t)return{x:0,y:0,width:0,height:0};e=!!e,t=$tx(t);var n,r=e?$tx.cumulativeOffset(t):$tx.positionedOffset(t),i=t.style.display;if("none"!=i&&i!=_NULL)n={width:t.offsetWidth,height:t.offsetHeight};else{var o=t.style,a=o.visibility,s=o.position,l=o.display;o.visibility="hidden",o.position="absolute",o.display="block";var u=t.clientWidth,f=t.clientHeight;o.display=l,o.position=s,o.visibility=a,n={width:u,height:f}}return{x:r[0],y:r[1],width:n.width,height:n.height}},getWidth:function(t){var e=t.style.width;return e.isPx()?e.parsePx():t.offsetWidth},setWidth:function(t,e){$tom.applyStyles(t,{width:e})},getHeight:function(t){var e=t.style.height;return e.isPx()?e.parsePx():t.offsetHeight},setHeight:function(t,e){$tom.applyStyles(t,{height:e})},replacePngPath:function(t){if($tx.msie6){if(_DOC.location.href.indexOf("http://")>-1)return;try{var e=$tx.getStyle(t,"filter"),n=/src='([^']+)'/.exec(e)[1];if(!n||"none"==n)return;if(n.indexOf("http://")>-1)return;var r=_DOC.location.href.split("/");r.push("css"),r.pop(),n=n.replace(/\.\.\//g,function(){return r.pop(),""});var i=r.join("/")+"/"+n;t.style.filter=e.replace(/src='([^']+)'/,"src='"+i+"'")}catch(t){alert(t)}}}}),Object.extend($tom,{EMPTY_BOGUS:$tx.msie_quirks||$tx.msie&&$tx.msie_ver<11?"&nbsp;":"<br>"}),Object.extend($tom,{EMPTY_PARAGRAPH_HTML:"<p>"+$tom.EMPTY_BOGUS+"</p>"}),_WIN.$tom=$tom;