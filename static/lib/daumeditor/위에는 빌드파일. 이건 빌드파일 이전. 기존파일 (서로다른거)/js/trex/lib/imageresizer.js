Trex.ImageResizer=Trex.Class.create({initialize:function(e,t){function i(e,t){var i,r,c=e.width,s=e.height;c==a&&s==o?(r=a,i=o):c<a&&s<o?(r=c,i=s):(i=o,r=Math.floor(o*(c/s)),r>a&&(r=a,i=Math.floor(a*(s/c)))),n.width=r,n.height=i,n.src=t,h(r,i)}var n=e,a=t.maxWidth||200,o=t.maxHeight||200,r=t.defImgUrl,h=t.onComplete||function(){};this.execResize=function(e){var t=new Image;t.onerror=function(){n.width=a,n.height=o,n.src=r,t=_NULL},t.onreadystatechange?t.onreadystatechange=function(){"complete"==this.readyState&&i(t,e)}:t.onload=function(){i(t,e)},t.src=e}}});