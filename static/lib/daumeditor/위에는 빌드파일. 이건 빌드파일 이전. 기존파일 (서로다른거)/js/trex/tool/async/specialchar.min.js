!function(){var e=document,t=(window,e.documentElement,!1);TrexMessage.addMsg({"@specialchar.cancel.image":"#iconpath/btn_l_cancel.gif?v=2","@specialchar.confirm.image":"#iconpath/btn_l_confirm.gif?v=2","@specialchar.title":"선택한 기호"}),Trex.Class.overwrite(Trex.Tool.SpecialChar,{oninitialized:function(){var e=this.canvas,n=function(n){n&&e.execute(function(e){if($tx.msie_docmode<9){var i="char"+(new Date).getTime();e.pasteContent('<span id="'+i+'">'+n+"</span>",t);var a=e.doc.getElementById(i);$tom.unwrap(a)}else e.pasteContent(n,t)})};this.resetWeave(),this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.SpecialChar(this.menuCfg),n)}}),Trex.MarkupTemplate.add("menu.specialchar.input",['<dl class="tx-menu-matrix-input">',"\t<dt><span>@specialchar.title</span></dt>",'\t<dd><input type="text" value=""/></dd>','\t<dd><img class="tx-menu-btn-confirm" src="@specialchar.confirm.image" align="absmiddle"/></dd>','\t<dd><img class="tx-menu-btn-cancel" src="@specialchar.cancel.image" align="absmiddle"/></dd>',"</dl>"].join("")),Trex.Menu.SpecialChar=Trex.Class.create({$extend:Trex.Menu.Matrix,ongenerated:function(){var e=this.elMenu,t=Trex.MarkupTemplate.get("menu.specialchar.input").evaluateAsDom({});$tom.append($tom.collect(e,"div.tx-menu-inner"),t);var n=this.elInput=$tom.collect(t,"input"),i=$tom.collectAll(t,"img");2==i.length&&($tx.observe(i[0],"click",function(){this._command(this.elInput.value),this.hide()}.bind(this)),$tx.observe(i[1],"click",function(){this.onCancel()}.bind(this))),$tx.observe(n,"keydown",function(e){13==e.keyCode&&($tx.stop(e),this._command(this.elInput.value),this.hide())}.bind(this))},onregenerated:function(){this.elInput.value="",this.elInput.focus()},onSelect:function(t){var n=this.elInput,i=$tx.findElement(t,"span");if((!i.tagName||"span"==i.tagName.toLowerCase())&&(n.value+=i.innerText&&"&nbsp;"!=i.innerText&&""!=i.innerText.trim()?i.innerText:"",$tx.stop(t),n.focus(),$tx.msie))try{var a=e.selection.createRange();a.move("character",n.value.length),a.select()}catch(e){}}});var n="specialchar";Editor.forEachEditor(function(e){e.getTool()[n].oninitialized()}),Editor.editorForAsyncLoad.getTool()[n].forceActivate()}();