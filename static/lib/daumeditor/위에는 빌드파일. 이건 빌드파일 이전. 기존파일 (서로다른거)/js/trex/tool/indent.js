TrexConfig.addTool("indent",{sync:_FALSE,status:_FALSE,hotKey:{keyCode:9}}),Trex.Tool.Indent=Trex.Class.create({$const:{__Identity:"indent"},$extend:Trex.Tool,oninitialized:function(e){this.weave(new Trex.Button(this.buttonCfg),_NULL,this.handler),this.bindKeyboard(e.hotKey,this.tabKeyHandler.bind(this)),this.createHandlers()},handler:function(){var e=this,n=e.canvas;n.execute(function(n){e.onIndentClicked.handle(n)})},tabKeyHandler:function(){var e=this;this.canvas.execute(function(n){e.onTabPressed.handle(n)})},createHandlers:function(){var e=Trex.Tool.Indent,n=e.Judge,t=e.Operation,s=e.Handler,i=Trex.ChainHandler,a=i.connect([new i(n.ListItem,t.IndentListItem),new i(n.BlockNode,t.IndentBlockNode)]),l=i.connect([new i(n.And(n.HeadOfParagraph,n.ListItem),t.IndentListItem),new i(n.ChildOfLastTableCell,t.GoToBelowTable),new i(n.ChildOfTableCell,t.GoToNextCell),new i(n.AlwaysTrue,t.IndentBlockNode)]);this.onTabPressed=new s(l,a,a),this.onIndentClicked=new s(a,a,a)}}),Trex.Tool.Indent.Handler=Trex.Class.create({initialize:function(e,n,t){var s=Trex.Tool.Indent,i=s.RangeIndenter,a=s.TableCellIndenter;this.collapsedRange=new i(e),this.selectedRange=new i(n),this.tableCellSelected=new a(t)},handle:function(e){var n=e.table?e.table.getTdArr():[];n.length>0?this.tableCellSelected.indent(e):e.isCollapsed()?this.collapsedRange.indent(e):this.selectedRange.indent(e)}}),Trex.ChainHandler=Trex.Class.create({$const:{connect:function(e){for(var n=e[0],t=1;t<e.length;t++)e[t-1].setNext(e[t]);return n}},initialize:function(e,n){return this.judge=e,this.executor=n,this},setNext:function(e){return this.successor=e,this.successor},handle:function(){var e=arguments;this.judge.apply(this,e)?this.executor.apply(this,e):this.successor&&this.successor.handle.apply(this.successor,e)}});