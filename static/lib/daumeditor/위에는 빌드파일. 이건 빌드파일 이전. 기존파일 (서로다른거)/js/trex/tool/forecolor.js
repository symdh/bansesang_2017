TrexConfig.addTool("forecolor",{defaultcolor:"#7c84ef",wysiwygonly:_TRUE,sync:_FALSE,status:_TRUE,useFavorite:_TRUE,thumbs:Trex.__CONFIG_COMMON.thumbs,needRevert:_TRUE}),Trex.Tool.ForeColor=Trex.Class.create({$const:{__Identity:"forecolor"},$extend:Trex.Tool,$mixins:[Trex.I.CookieBaker,Trex.I.FontTool,Trex.I.MenuFontTool,Trex.I.WrappingSpanFontTool],beforeOnInitialized:function(t){this.useFavorite=!!t.useFavorite,this.useFavorite&&this.initCookie("txForeColorFavorite")},createButton:function(){var t=this.readCookie()||this.getDefaultProperty(),e=this.button=new Trex.Button.Splits(this.buttonCfg);return e.setValue(t),this.syncButton(t),e},createMenu:function(){return new Trex.Menu.ColorPallete(this.menuCfg)},onAfterHandler:function(t){this.syncButton(t),this.useFavorite&&this.writeCookie(t)},getDefaultProperty:function(){return this.canvas.getStyleConfig().color},getRelatedCssPropertyNames:function(){return[this.getCssPropertyName()]},getCssPropertyName:function(){return"color"},getQueryCommandName:function(){return"forecolor"},computeNewStyle:function(t){var e={};return e[this.getCssPropertyName()]=t||this.getDefaultProperty(),e},syncButton:function(t){try{t&&$tx.setStyle(this.button.elButton,{backgroundColor:t})}catch(t){console.log(t)}}});