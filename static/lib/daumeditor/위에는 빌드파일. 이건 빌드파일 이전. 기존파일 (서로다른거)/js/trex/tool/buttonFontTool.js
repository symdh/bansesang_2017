Trex.I.ButtonFontTool=Trex.Mixin.create({oninitialized:function(t){var e=this;e.button=new Trex.Button(e.buttonCfg),e.weave(e.button,_NULL,e.handler),t.sync&&e.startSyncButtonWithStyle(),e.bindKeyboard(t.hotKey,e.handler.bind(e))},rangeExecutor:function(t,e,n){var r=null;if($tx.msie&&this.wrapDummy&&t.isCollapsed()){r=this.wrapDummy(t,n),t.execCommand(this.getQueryCommandName());var o=t.createGoogRangeFromNodes(r,1,r,1);o.select()}else t.execCommand(this.getQueryCommandName())},onAfterHandler:function(t){var e=this.canvas;e.triggerQueryStatus&&e.triggerQueryStatus()},startSyncButtonWithStyle:function(){var t=this;t.canvas.observeJob(Trex.Ev.__CANVAS_PANEL_QUERY_STATUS,function(e){t.syncButton(t.queryCurrentStyle(e))})},queryCurrentStyle:function(t){var e=this,n=e.canvas.query(function(n){var r=e.getQueryCommandName(),o=20,a=$tx.gecko&&$tx.gecko_ver<o;if(!r||$tx.opera||a){var u=e.findQueryingNode(t);return!!u&&e.isStyleApplied(u)}return n.queryCommandState(r)});return n},computeNewStyle:function(){return _NULL},cachedProperty:_FALSE,syncButton:function(t){this.cachedProperty!=t&&(this.button.setState(t),this.cachedProperty=t)}});